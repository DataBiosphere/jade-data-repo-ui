events {
  worker_connections  4096;  ## Default: 1024
}

http {
  server { # simple reverse-proxy
    listen       80;

    # pass the status check through
    location /status {
        proxy_pass http://api-service.data-repo:8080/status;
    }

    # get swagger working
    location /swagger-ui.html {
        proxy_pass http://api-service.data-repo:8080/swagger-ui.html;
    }

    location ~ (ga4gh|webjars|api-docs|swagger-resources) {
        proxy_pass http://api-service.data-repo:8080;
    }

    # serve static files
    location / {
      root /usr/share/nginx/html;
      try_files $uri /index.html =404;
    }
  }
}
